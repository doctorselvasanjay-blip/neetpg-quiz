<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NEET PG Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; }
    h1 { text-align:center; }
    .question { margin:20px 0; padding:15px; background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .options button { display:block; margin:8px 0; padding:10px; width:100%; border:none; border-radius:6px; cursor:pointer; }
    .options button:hover { background:#eee; }
    .correct { background:#c8f7c5 !important; }
    .wrong { background:#f7c5c5 !important; }
    .explanation { margin-top:10px; font-size:14px; color:#333; }
    #scoreBox { font-size:18px; font-weight:bold; margin-top:20px; text-align:center; }
    #retryBtn { display:none; margin:20px auto; padding:10px 20px; background:#007BFF; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    #retryBtn:hover { background:#0056b3; }
  </style>
</head>
<body>
  <h1>NEET PG Quiz</h1>
  <label for="difficulty">Choose Difficulty: </label>
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="moderate">Moderate</option>
    <option value="hard">Hard</option>
    <option value="clinical">Clinical</option>
  </select>
  <button onclick="loadQuestions()">Load Questions</button>
  
  <div id="quiz"></div>
  <div id="scoreBox"></div>
  <button id="retryBtn" onclick="retryQuiz()">Retry Quiz</button>

  <script>
    const questionBank = {
      easy: [
        {
          q: "Normal adult heart rate?",
          options: ["40-60 bpm", "60-100 bpm", "100-120 bpm", "120-140 bpm"],
          answer: 1,
          explanation: "Normal adult resting heart rate is 60–100 bpm."
        },
        {
          q: "What is the universal blood donor?",
          options: ["O+", "O-", "AB+", "AB-"],
          answer: 1,
          explanation: "O negative is universal donor because it lacks A, B, and Rh antigens."
        }
      ],
      moderate: [
        {
          q: "Which vitamin deficiency causes night blindness?",
          options: ["Vitamin A", "Vitamin B1", "Vitamin C", "Vitamin D"],
          answer: 0,
          explanation: "Vitamin A deficiency leads to impaired dark adaptation → night blindness."
        }
      ],
      hard: [
        {
          q: "Most common cause of community acquired pneumonia?",
          options: ["Streptococcus pneumoniae", "Klebsiella", "Mycoplasma", "Staph aureus"],
          answer: 0,
          explanation: "Streptococcus pneumoniae is the leading cause."
        }
      ],
      clinical: [
        {
          q: "A 65-year-old male with smoking history presents with hematuria. Next best investigation?",
          options: ["Ultrasound KUB", "Urine cytology", "CT Urography", "IVP"],
          answer: 2,
          explanation: "CT urography is investigation of choice in suspected urothelial cancer."
        }
      ]
    };

    let score = 0;
    let total = 0;

    function loadQuestions() {
      score = 0;
      document.getElementById("scoreBox").innerText = "";
      document.getElementById("retryBtn").style.display = "none";

      const diff = document.getElementById("difficulty").value;
      const questions = [...questionBank[diff]];
      total = questions.length;

      const quizDiv = document.getElementById("quiz");
      quizDiv.innerHTML = "";

      questions.forEach((q, idx) => {
        const qDiv = document.createElement("div");
        qDiv.className = "question";

        const qText = document.createElement("p");
        qText.innerText = `Q${idx+1}. ${q.q}`;
        qDiv.appendChild(qText);

        const optDiv = document.createElement("div");
        optDiv.className = "options";

        q.options.forEach((opt, i) => {
          const btn = document.createElement("button");
          btn.innerText = opt;
          btn.onclick = () => checkAnswer(btn, i, q.answer, q.explanation, qDiv);
          optDiv.appendChild(btn);
        });

        qDiv.appendChild(optDiv);
        quizDiv.appendChild(qDiv);
      });
    }

    function checkAnswer(button, chosen, correct, explanation, qDiv) {
      const buttons = qDiv.querySelectorAll("button");
      buttons.forEach(b => b.disabled = true);

      if(chosen === correct) {
        button.classList.add("correct");
        score++;
      } else {
        button.classList.add("wrong");
        buttons[correct].classList.add("correct");
      }

      const exp = document.createElement("div");
      exp.className = "explanation";
      exp.innerText = "Explanation: " + explanation;
      qDiv.appendChild(exp);

      if(document.querySelectorAll(".question").length === document.querySelectorAll(".explanation").length) {
        showScore();
      }
    }

    function showScore() {
      document.getElementById("scoreBox").innerText = `You scored ${score} / ${total}`;
      document.getElementById("retryBtn").style.display = "block";
    }

    function retryQuiz() {
      loadQuestions();
    }
  </script>
</body>
</html>
